DROP TABLE LIST_STORY;
DROP TABLE STORY_GENRE;
DROP TABLE PERSON_GENRE;
DROP TABLE LIST;
DROP TABLE GENRE;
DROP TABLE PERSON;
DROP TABLE STORY;

CREATE TABLE STORY(
	StoryID UNIQUEIDENTIFIER DEFAULT NEWID() PRIMARY KEY,
	Title VARCHAR(100) NOT NULL,
	Grade INTEGER DEFAULT 0,
	Description VARCHAR(300) NOT NULL
);

CREATE TABLE PERSON (
	PersonID UNIQUEIDENTIFIER DEFAULT NEWID() PRIMARY KEY,
	Username VARCHAR(100) UNIQUE NOT NULL,
	Password VARCHAR(50) NOT NULL,
	Email VARCHAR(400) UNIQUE NOT NULL,
	Description VARCHAR(200)
);

CREATE TABLE LIST (
	ListID UNIQUEIDENTIFIER DEFAULT NEWID() PRIMARY KEY,
	PersonId UNIQUEIDENTIFIER FOREIGN KEY REFERENCES PERSON(PersonID) ON DELETE CASCADE NOT NULL,
	Name VARCHAR(100) NOT NULL,
	Description VARCHAR(250)
);

CREATE TABLE GENRE (
	GenreID UNIQUEIDENTIFIER DEFAULT NEWID() PRIMARY KEY,
	Name VARCHAR(50) NOT NULL
);

CREATE TABLE PERSON_GENRE(
	PersonId UNIQUEIDENTIFIER FOREIGN KEY REFERENCES PERSON(PersonID) ON DELETE CASCADE,
	GenreId UNIQUEIDENTIFIER FOREIGN KEY REFERENCES GENRE(GenreID) ON DELETE CASCADE,
	CONSTRAINT PersonGenreID PRIMARY KEY (PersonId,GenreId)
);

CREATE TABLE STORY_GENRE(
	StoryId UNIQUEIDENTIFIER FOREIGN KEY REFERENCES STORY(StoryID) ON DELETE CASCADE,
	GenreId UNIQUEIDENTIFIER FOREIGN KEY REFERENCES GENRE(GenreID) ON DELETE CASCADE,
	CONSTRAINT StoryGenreID PRIMARY KEY (StoryId,GenreId)
);

CREATE TABLE LIST_STORY(
	ListId UNIQUEIDENTIFIER FOREIGN KEY REFERENCES LIST(ListID) ON DELETE CASCADE,
	StoryId UNIQUEIDENTIFIER FOREIGN KEY REFERENCES STORY(StoryID) ON DELETE CASCADE,
	CONSTRAINT ListStoryID PRIMARY KEY (ListId, StoryId)
);




INSERT INTO STORY (StoryID,Title,Description) VALUES ('2c3b5f06-21d3-4d94-8ff8-6d44b6caace8', 'Some Story Title', 'Some Story Description');
INSERT INTO STORY (StoryID,Title,Description) VALUES ('ec949e04-801b-41f7-b161-ed243fc83880', 'Some Story2 Title', 'Some Story2 Description');
INSERT INTO STORY (StoryID,Title,Description) VALUES ('f811efa6-3f87-45f7-81f5-ff94656117f6', 'Some Story3 Title', 'Some Story3 Description');



INSERT INTO PERSON (PersonID, Username, Password, Email, Description) VALUES 
('303e12a2-b66d-4e05-8a20-2abb9f7a934e', 'person username', 'password1', 'person@gmail.com', 'This is persons description');
INSERT INTO PERSON (PersonID, Username, Password, Email, Description) VALUES 
('3ffa1a8f-0c4a-4ffa-9894-b4f7a9894eb6', 'person2 username', 'password2','person2@gmail.com', 'This is persons2 description');
INSERT INTO PERSON (PersonID, Username, Password, Email, Description) VALUES 
('443d3edd-1fa6-4694-85bf-ba73c43b3ace', 'person3 username', 'password3','person3@gmail.com', 'This is persons3 description');




INSERT INTO LIST (ListID, PersonId, Name, Description) VALUES 
('169be589-f979-4d5f-a7ac-70e79fa11435', '303e12a2-b66d-4e05-8a20-2abb9f7a934e', 'Best Scary Stories', 'These are best stories');
INSERT INTO LIST (ListID, PersonId, Name) VALUES 
('6e2d4b8e-c3ee-4b44-8b0d-1c36c6f0a817', '443d3edd-1fa6-4694-85bf-ba73c43b3ace', 'Best Scary Stories2');




INSERT INTO GENRE (GenreID, Name) VALUES ('26c15502-acca-4d8a-8a75-124918f3cb98', 'Fantasy');
INSERT INTO GENRE (GenreID, Name) VALUES ('2dc21e46-06f5-4bc9-8f6c-2092bc5404e2', 'Adventure');
INSERT INTO GENRE (GenreID, Name) VALUES ('fbfb6bde-e91e-4f1c-b0e9-093f6ed962b8', 'Romance');
INSERT INTO GENRE (GenreID, Name) VALUES ('1e396fbb-f568-4254-9037-80eb69f4f4b4', 'Mystery');
INSERT INTO GENRE (GenreID, Name) VALUES ('228ac338-4cd8-4835-9c72-1db2b53adb04', 'Horror');
INSERT INTO GENRE (GenreID, Name) VALUES ('69a36f75-27d5-4593-aeba-b5093908ab8d', 'Thriller');
INSERT INTO GENRE (GenreID, Name) VALUES ('92621ec4-baec-48ef-917c-a38b27cbcceb', 'Paranormal');
INSERT INTO GENRE (GenreID, Name) VALUES ('ffcdaad3-8d28-4a4d-aadf-61669675e90a', 'Science Fiction');
INSERT INTO GENRE (GenreID, Name) VALUES ('123e6520-2521-4ca9-ac75-3f3f6375d524', 'Historical fiction');
INSERT INTO GENRE (GenreID, Name) VALUES ('c50d7e3a-4821-4a1c-ba1e-d1b26ba7244d', 'Cooking');
INSERT INTO GENRE (GenreID, Name) VALUES ('34306c9a-58ef-498b-9da4-18620df40589', 'Travel');
INSERT INTO GENRE (GenreID, Name) VALUES ('995bd319-400b-45c3-ba92-5323d95fe5bf', 'Motivational');
INSERT INTO GENRE (GenreID, Name) VALUES ('b9354c75-f738-48d1-9638-6a8e807fdf04', 'Humor');
INSERT INTO GENRE (GenreID, Name) VALUES ('2b79ad50-b120-4b79-87ac-ecee18ebb95f', 'Children’s');
INSERT INTO GENRE (GenreID, Name) VALUES ('897b057d-8feb-4180-8468-f477650b98d6', 'Young Adult');




INSERT INTO PERSON_GENRE (PersonId, GenreId) VALUES ('303e12a2-b66d-4e05-8a20-2abb9f7a934e', '26c15502-acca-4d8a-8a75-124918f3cb98');
INSERT INTO PERSON_GENRE (PersonId, GenreId) VALUES ('303e12a2-b66d-4e05-8a20-2abb9f7a934e', '92621ec4-baec-48ef-917c-a38b27cbcceb');
INSERT INTO PERSON_GENRE (PersonId, GenreId) VALUES ('303e12a2-b66d-4e05-8a20-2abb9f7a934e', '897b057d-8feb-4180-8468-f477650b98d6');
INSERT INTO PERSON_GENRE (PersonId, GenreId) VALUES ('303e12a2-b66d-4e05-8a20-2abb9f7a934e', '228ac338-4cd8-4835-9c72-1db2b53adb04');
INSERT INTO PERSON_GENRE (PersonId, GenreId) VALUES ('3FFA1A8F-0C4A-4FFA-9894-B4F7A9894EB6', '92621ec4-baec-48ef-917c-a38b27cbcceb');
INSERT INTO PERSON_GENRE (PersonId, GenreId) VALUES ('3FFA1A8F-0C4A-4FFA-9894-B4F7A9894EB6', '34306c9a-58ef-498b-9da4-18620df40589');
INSERT INTO PERSON_GENRE (PersonId, GenreId) VALUES ('443D3EDD-1FA6-4694-85BF-BA73C43B3ACE', '2b79ad50-b120-4b79-87ac-ecee18ebb95f');
INSERT INTO PERSON_GENRE (PersonId, GenreId) VALUES ('443D3EDD-1FA6-4694-85BF-BA73C43B3ACE', 'b9354c75-f738-48d1-9638-6a8e807fdf04');




INSERT INTO STORY_GENRE (StoryId, GenreId) VALUES ('2C3B5F06-21D3-4D94-8FF8-6D44B6CAACE8', 'FBFB6BDE-E91E-4F1C-B0E9-093F6ED962B8');
INSERT INTO STORY_GENRE (StoryId, GenreId) VALUES ('2C3B5F06-21D3-4D94-8FF8-6D44B6CAACE8', '897B057D-8FEB-4180-8468-F477650B98D6');
INSERT INTO STORY_GENRE (StoryId, GenreId) VALUES ('EC949E04-801B-41F7-B161-ED243FC83880', '26C15502-ACCA-4D8A-8A75-124918F3CB98');
INSERT INTO STORY_GENRE (StoryId, GenreId) VALUES ('EC949E04-801B-41F7-B161-ED243FC83880', '228AC338-4CD8-4835-9C72-1DB2B53ADB04');
INSERT INTO STORY_GENRE (StoryId, GenreId) VALUES ('EC949E04-801B-41F7-B161-ED243FC83880', '69A36F75-27D5-4593-AEBA-B5093908AB8D');
INSERT INTO STORY_GENRE (StoryId, GenreId) VALUES ('F811EFA6-3F87-45F7-81F5-FF94656117F6', '2B79AD50-B120-4B79-87AC-ECEE18EBB95F');




INSERT INTO LIST_STORY (ListId, StoryId) VALUES ('6E2D4B8E-C3EE-4B44-8B0D-1C36C6F0A817', '2C3B5F06-21D3-4D94-8FF8-6D44B6CAACE8');
INSERT INTO LIST_STORY (ListId, StoryId) VALUES ('6E2D4B8E-C3EE-4B44-8B0D-1C36C6F0A817', 'EC949E04-801B-41F7-B161-ED243FC83880');
INSERT INTO LIST_STORY (ListId, StoryId) VALUES ('6E2D4B8E-C3EE-4B44-8B0D-1C36C6F0A817', 'F811EFA6-3F87-45F7-81F5-FF94656117F6');
INSERT INTO LIST_STORY (ListId, StoryId) VALUES ('169BE589-F979-4D5F-A7AC-70E79FA11435', '2C3B5F06-21D3-4D94-8FF8-6D44B6CAACE8');