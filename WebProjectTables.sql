DROP TABLE LIST_STORY;
DROP TABLE STORY_GENRE;
DROP TABLE USER_GENRE;
DROP TABLE STORY_TAG;
DROP TABLE LIST;
DROP TABLE GENRE;
DROP TABLE CHAPTER;
DROP TABLE STORY;
DROP TABLE TAG;

CREATE TABLE STORY(
	StoryID UNIQUEIDENTIFIER DEFAULT NEWID() PRIMARY KEY,
	AuthorId nvarchar(128) FOREIGN KEY REFERENCES AspNetUsers(Id) ON DELETE CASCADE NOT NULL,
	Title VARCHAR(100) NOT NULL,
	Grade INTEGER DEFAULT 0 NOT NULL,
	Description VARCHAR(300),
	Finished INTEGER DEFAULT 0
);

CREATE TABLE CHAPTER(
	ChapterID UNIQUEIDENTIFIER DEFAULT NEWID() PRIMARY KEY,
	StoryId UNIQUEIDENTIFIER FOREIGN KEY REFERENCES STORY(StoryID) ON DELETE CASCADE NOT NULL,
	Name VARCHAR(30) NOT NULL,
	ChapterNumber INTEGER NOT NULL,
	Content NVARCHAR(MAX)
);

CREATE TABLE TAG(
	TagID UNIQUEIDENTIFIER DEFAULT NEWID() PRIMARY KEY,
	Name VARCHAR(20) NOT NULL
);

CREATE TABLE LIST (
	ListID UNIQUEIDENTIFIER DEFAULT NEWID() PRIMARY KEY,
	UserId nvarchar(128) FOREIGN KEY REFERENCES AspNetUsers(Id) ON DELETE CASCADE NOT NULL,
	Name VARCHAR(100) NOT NULL,
	Description VARCHAR(250)
);

CREATE TABLE GENRE (
	GenreID UNIQUEIDENTIFIER DEFAULT NEWID() PRIMARY KEY,
	Name VARCHAR(50) NOT NULL
);

CREATE TABLE USER_GENRE(
	UserId nvarchar(128) FOREIGN KEY REFERENCES AspNetUsers(Id) ON DELETE CASCADE,
	GenreId UNIQUEIDENTIFIER FOREIGN KEY REFERENCES GENRE(GenreID) ON DELETE CASCADE,
	CONSTRAINT UserGenreID PRIMARY KEY (UserId,GenreId)
);

CREATE TABLE STORY_GENRE(
	StoryId UNIQUEIDENTIFIER FOREIGN KEY REFERENCES STORY(StoryID) ON DELETE CASCADE,
	GenreId UNIQUEIDENTIFIER FOREIGN KEY REFERENCES GENRE(GenreID) ON DELETE CASCADE,
	CONSTRAINT StoryGenreID PRIMARY KEY (StoryId,GenreId)
);

CREATE TABLE LIST_STORY(
	ListId UNIQUEIDENTIFIER FOREIGN KEY REFERENCES LIST(ListID) ON DELETE CASCADE,
	StoryId UNIQUEIDENTIFIER FOREIGN KEY REFERENCES STORY(StoryID),
	CONSTRAINT ListStoryID PRIMARY KEY (ListId, StoryId)
);

CREATE TABLE STORY_TAG(
	StoryId UNIQUEIDENTIFIER FOREIGN KEY REFERENCES STORY(StoryID) ON DELETE CASCADE,
	TagId UNIQUEIDENTIFIER FOREIGN KEY REFERENCES TAG(TagID) ON DELETE CASCADE,
	CONSTRAINT StoryTagID PRIMARY KEY (StoryId, TagId)
);



INSERT INTO STORY (StoryID,AuthorId,Title,Description) VALUES ('2c3b5f06-21d3-4d94-8ff8-6d44b6caace8', '2a97eeab-0688-401f-82aa-fafd09346531', 'Some Story Title', 'Some Story Description');
INSERT INTO STORY (StoryID,AuthorId,Title,Description) VALUES ('ec949e04-801b-41f7-b161-ed243fc83880', '2a97eeab-0688-401f-82aa-fafd09346531', 'Some Story2 Title', 'Some Story2 Description');
INSERT INTO STORY (StoryID,AuthorId,Title,Description) VALUES ('f811efa6-3f87-45f7-81f5-ff94656117f6', '337683f5-37e1-4245-8775-e4b32aef83b6', 'Some Story3 Title', 'Some Story3 Description');



INSERT INTO CHAPTER (ChapterID, StoryId, Name, ChapterNumber, Content) VALUES ('f2b0ed68-a27d-4d01-9293-045e27a0cf96', '2c3b5f06-21d3-4d94-8ff8-6d44b6caace8', 'Chapter 1', 1, 'First Chapter Content');
INSERT INTO CHAPTER (ChapterID, StoryId, Name, ChapterNumber, Content) VALUES ('0863a81d-4105-4617-919c-a66bce5f3160', '2c3b5f06-21d3-4d94-8ff8-6d44b6caace8', 'Chapter 2', 2, 'Second Chapter Content');
INSERT INTO CHAPTER (ChapterID, StoryId, Name, ChapterNumber, Content) VALUES ('f1c92579-1e90-4d3d-96c3-5cd92c2004d1', '2c3b5f06-21d3-4d94-8ff8-6d44b6caace8', 'Chapter 3', 3, 'Third Chapter Content');
INSERT INTO CHAPTER (ChapterID, StoryId, Name, ChapterNumber, Content) VALUES ('d73a7c51-c3bf-4b17-96ae-3643ab73a315', '2c3b5f06-21d3-4d94-8ff8-6d44b6caace8', 'Chapter 4', 4, 'Fourth Chapter Content');
INSERT INTO CHAPTER (ChapterID, StoryId, Name, ChapterNumber) VALUES ('d605c02a-d52c-4299-80de-28ff45a38f68', '2c3b5f06-21d3-4d94-8ff8-6d44b6caace8', 'Chapter 5', 5);
INSERT INTO CHAPTER (ChapterID, StoryId, Name, ChapterNumber, Content) VALUES ('b9c1048d-58c1-41d0-80cf-1da575764393', 'ec949e04-801b-41f7-b161-ed243fc83880', 'Intro', 0, 'this is the intro');
INSERT INTO CHAPTER (ChapterID, StoryId, Name, ChapterNumber) VALUES ('84e0a8d4-03c6-4a2b-8755-0d4441114ff1', 'ec949e04-801b-41f7-b161-ed243fc83880', 'In The Beggining', 1);
INSERT INTO CHAPTER (ChapterID, StoryId, Name, ChapterNumber) VALUES ('8338a4ba-15ee-4950-8898-088527457a47', 'ec949e04-801b-41f7-b161-ed243fc83880', 'First Challenge', 2);
INSERT INTO CHAPTER (ChapterID, StoryId, Name, ChapterNumber) VALUES ('3115b2f6-520c-4d32-8abc-35d9ee5be03c', 'ec949e04-801b-41f7-b161-ed243fc83880', 'Ending', 3);




INSERT INTO LIST (ListID, UserId, Name, Description) VALUES 
('169be589-f979-4d5f-a7ac-70e79fa11435', '337683f5-37e1-4245-8775-e4b32aef83b6', 'Best Scary Stories', 'These are best stories');
INSERT INTO LIST (ListID, UserId, Name) VALUES 
('6e2d4b8e-c3ee-4b44-8b0d-1c36c6f0a817', '90fb65a3-adab-4f0c-899d-fbb5ecdefef0', 'Best Scary Stories2');




INSERT INTO GENRE (GenreID, Name) VALUES ('26c15502-acca-4d8a-8a75-124918f3cb98', 'Fantasy');
INSERT INTO GENRE (GenreID, Name) VALUES ('2dc21e46-06f5-4bc9-8f6c-2092bc5404e2', 'Adventure');
INSERT INTO GENRE (GenreID, Name) VALUES ('fbfb6bde-e91e-4f1c-b0e9-093f6ed962b8', 'Romance');
INSERT INTO GENRE (GenreID, Name) VALUES ('1e396fbb-f568-4254-9037-80eb69f4f4b4', 'Mystery');
INSERT INTO GENRE (GenreID, Name) VALUES ('228ac338-4cd8-4835-9c72-1db2b53adb04', 'Horror');
INSERT INTO GENRE (GenreID, Name) VALUES ('69a36f75-27d5-4593-aeba-b5093908ab8d', 'Thriller');
INSERT INTO GENRE (GenreID, Name) VALUES ('92621ec4-baec-48ef-917c-a38b27cbcceb', 'Paranormal');
INSERT INTO GENRE (GenreID, Name) VALUES ('ffcdaad3-8d28-4a4d-aadf-61669675e90a', 'Science Fiction');
INSERT INTO GENRE (GenreID, Name) VALUES ('123e6520-2521-4ca9-ac75-3f3f6375d524', 'Historical');
INSERT INTO GENRE (GenreID, Name) VALUES ('c50d7e3a-4821-4a1c-ba1e-d1b26ba7244d', 'Cooking');
INSERT INTO GENRE (GenreID, Name) VALUES ('34306c9a-58ef-498b-9da4-18620df40589', 'Travel');
INSERT INTO GENRE (GenreID, Name) VALUES ('995bd319-400b-45c3-ba92-5323d95fe5bf', 'Motivational');
INSERT INTO GENRE (GenreID, Name) VALUES ('b9354c75-f738-48d1-9638-6a8e807fdf04', 'Humor');
INSERT INTO GENRE (GenreID, Name) VALUES ('2b79ad50-b120-4b79-87ac-ecee18ebb95f', 'Children’s');
INSERT INTO GENRE (GenreID, Name) VALUES ('897b057d-8feb-4180-8468-f477650b98d6', 'Young Adult');




INSERT INTO USER_GENRE (UserId, GenreId) VALUES ('90fb65a3-adab-4f0c-899d-fbb5ecdefef0', '26c15502-acca-4d8a-8a75-124918f3cb98');
INSERT INTO USER_GENRE (UserId, GenreId) VALUES ('90fb65a3-adab-4f0c-899d-fbb5ecdefef0', '92621ec4-baec-48ef-917c-a38b27cbcceb');
INSERT INTO USER_GENRE (UserId, GenreId) VALUES ('90fb65a3-adab-4f0c-899d-fbb5ecdefef0', '897b057d-8feb-4180-8468-f477650b98d6');
INSERT INTO USER_GENRE (UserId, GenreId) VALUES ('90fb65a3-adab-4f0c-899d-fbb5ecdefef0', '228ac338-4cd8-4835-9c72-1db2b53adb04');
INSERT INTO USER_GENRE (UserId, GenreId) VALUES ('2a97eeab-0688-401f-82aa-fafd09346531', '92621ec4-baec-48ef-917c-a38b27cbcceb');
INSERT INTO USER_GENRE (UserId, GenreId) VALUES ('2a97eeab-0688-401f-82aa-fafd09346531', '34306c9a-58ef-498b-9da4-18620df40589');
INSERT INTO USER_GENRE (UserId, GenreId) VALUES ('337683f5-37e1-4245-8775-e4b32aef83b6', '2b79ad50-b120-4b79-87ac-ecee18ebb95f');
INSERT INTO USER_GENRE (UserId, GenreId) VALUES ('337683f5-37e1-4245-8775-e4b32aef83b6', 'b9354c75-f738-48d1-9638-6a8e807fdf04');




INSERT INTO STORY_GENRE (StoryId, GenreId) VALUES ('2C3B5F06-21D3-4D94-8FF8-6D44B6CAACE8', 'FBFB6BDE-E91E-4F1C-B0E9-093F6ED962B8');
INSERT INTO STORY_GENRE (StoryId, GenreId) VALUES ('2C3B5F06-21D3-4D94-8FF8-6D44B6CAACE8', '897B057D-8FEB-4180-8468-F477650B98D6');
INSERT INTO STORY_GENRE (StoryId, GenreId) VALUES ('EC949E04-801B-41F7-B161-ED243FC83880', '26C15502-ACCA-4D8A-8A75-124918F3CB98');
INSERT INTO STORY_GENRE (StoryId, GenreId) VALUES ('EC949E04-801B-41F7-B161-ED243FC83880', '228AC338-4CD8-4835-9C72-1DB2B53ADB04');
INSERT INTO STORY_GENRE (StoryId, GenreId) VALUES ('EC949E04-801B-41F7-B161-ED243FC83880', '69A36F75-27D5-4593-AEBA-B5093908AB8D');
INSERT INTO STORY_GENRE (StoryId, GenreId) VALUES ('F811EFA6-3F87-45F7-81F5-FF94656117F6', '2B79AD50-B120-4B79-87AC-ECEE18EBB95F');

  


INSERT INTO LIST_STORY (ListId, StoryId) VALUES ('6E2D4B8E-C3EE-4B44-8B0D-1C36C6F0A817', '2C3B5F06-21D3-4D94-8FF8-6D44B6CAACE8');
INSERT INTO LIST_STORY (ListId, StoryId) VALUES ('6E2D4B8E-C3EE-4B44-8B0D-1C36C6F0A817', 'EC949E04-801B-41F7-B161-ED243FC83880');
INSERT INTO LIST_STORY (ListId, StoryId) VALUES ('6E2D4B8E-C3EE-4B44-8B0D-1C36C6F0A817', 'F811EFA6-3F87-45F7-81F5-FF94656117F6');
INSERT INTO LIST_STORY (ListId, StoryId) VALUES ('169BE589-F979-4D5F-A7AC-70E79FA11435', '2C3B5F06-21D3-4D94-8FF8-6D44B6CAACE8');




INSERT INTO TAG (TagID, Name) VALUES ('edc38b6e-9c40-448d-8edd-524fbc7ecb78', 'autumn');
INSERT INTO TAG (TagID, Name) VALUES ('0fbcf65a-2f1f-498a-84e3-cff18c26d31c', 'winter');
INSERT INTO TAG (TagID, Name) VALUES ('5b0c5929-76c2-483f-82f6-f2ba9bf9bd2f', 'spring');
INSERT INTO TAG (TagID, Name) VALUES ('f95bb724-c85c-4bd2-a702-2c7a77006c71', 'summer');
INSERT INTO TAG (TagID, Name) VALUES ('5837631f-7165-4edc-bebc-591cccdef6c5', 'love');
INSERT INTO TAG (TagID, Name) VALUES ('bee59e52-1a06-4708-9ec1-1874d1cc0f38', 'thieves');
INSERT INTO TAG (TagID, Name) VALUES ('58e91353-f388-4883-bfce-5a251781488f', 'music');
INSERT INTO TAG (TagID, Name) VALUES ('e7c368e5-6919-481c-a985-95752749b4fa', 'vampire');
INSERT INTO TAG (TagID, Name) VALUES ('2ee7d4e9-5d31-44f3-9749-c3003c9deb7e', 'school');
INSERT INTO TAG (TagID, Name) VALUES ('1e822bf5-5423-46a1-a653-e32f647357ca', 'college');




INSERT INTO STORY_TAG (StoryId, TagId) VALUES ('2c3b5f06-21d3-4d94-8ff8-6d44b6caace8', 'edc38b6e-9c40-448d-8edd-524fbc7ecb78');
INSERT INTO STORY_TAG (StoryId, TagId) VALUES ('2c3b5f06-21d3-4d94-8ff8-6d44b6caace8', '2ee7d4e9-5d31-44f3-9749-c3003c9deb7e');
INSERT INTO STORY_TAG (StoryId, TagId) VALUES ('2c3b5f06-21d3-4d94-8ff8-6d44b6caace8', '5837631f-7165-4edc-bebc-591cccdef6c5');
INSERT INTO STORY_TAG (StoryId, TagId) VALUES ('ec949e04-801b-41f7-b161-ed243fc83880', '1e822bf5-5423-46a1-a653-e32f647357ca');
INSERT INTO STORY_TAG (StoryId, TagId) VALUES ('ec949e04-801b-41f7-b161-ed243fc83880', '0fbcf65a-2f1f-498a-84e3-cff18c26d31c');